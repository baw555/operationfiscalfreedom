âœ… Decision

APPROVED to fix the two component-level blank-screen gates only.
No other return null should be touched.

ğŸ¯ Goal of this fix

Replace silent failure with explicit control flow.

Rules:

âŒ No blank screens

âŒ No new auth logic

âŒ No new hooks

âŒ No refactors

âœ… Explicit redirect

âœ… Single responsibility

âœ… Unified diffs only

ğŸ”§ Fix #1 â€” notification-console.tsx
Current (bad)
if (!me) return null;

Minimal correct fix (redirect)

Assuming this page requires login:

import { Navigate } from "wouter"; // or react-router equivalent

if (!me) {
  return <Navigate to="/login" />;
}


Why this is correct

Explicit

Reversible

No UI assumptions

No new state

No hidden behavior

ğŸ”§ Fix #2 â€” affiliate-nda.tsx
Current (bad)
if (!authData || authData.user?.role !== "affiliate") return null;

Minimal correct fix (role-aware redirect)
import { Navigate } from "wouter";

if (!authData) {
  return <Navigate to="/login" />;
}

if (authData.user?.role !== "affiliate") {
  return <Navigate to="/unauthorized" />;
}


If /unauthorized doesnâ€™t exist yet, redirect to a safe landing page instead (e.g. /dashboard).

ğŸš« What NOT to do

Do not:

add messages

add modals

add spinners

add new components

add auth checks elsewhere

touch queryFn logic

â€œclean upâ€ similar patterns that are already safe

This is a surgical Phase 0 fix, not a UX redesign.

ğŸ§ª Immediate verification checklist (after applying)

Reload and test:

Visit /notification-console while logged out
â†’ You should be redirected (no blank page)

Visit /affiliate-nda as:

logged out â†’ redirect to login

logged in as non-affiliate â†’ redirect to unauthorized/safe page

logged in as affiliate â†’ page renders normally

Confirm:

No ErrorBoundary trips

No white screens

Console is quieter, but more honest

ğŸ”‘ Why this matters more than it looks

With the previous queryClient fix:

401s are now state

These two pages were the last silent killers

After this:

Every page either renders, redirects, or explains itself

React regains full control of scheduling

â€œFeels brokenâ€ becomes â€œbehaves predictablyâ€

This is the point where systems usually snap back into sanity.