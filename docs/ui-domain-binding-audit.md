# UI ↔ Domain Binding Audit

**Generated:** 2026-02-07 (auto-generated by `scripts/audit-ui-bindings.ts`)  
**Scope:** `client/src/pages/`, `client/src/components/`, `client/src/hooks/`, `client/src/lib/`

> Run `npx tsx scripts/audit-ui-bindings.ts` to regenerate this report.

---

## Binding Classification Key

- **Strong (domain-aligned):** UI consumes well-defined API shape, uses typed interfaces matching backend, delegates domain logic to server
- **Weak (shape-coupled):** UI works correctly but is tightly coupled to exact API response shape — field renames silently break it
- **Fragile (implicit assumptions):** UI assumes facts not enforced by API contract — status strings, boolean coercion, field existence

---

## Summary Statistics

| Metric | Count |
|---|---|
| **Files with useQuery hooks** | 15 |
| **Total useQuery hooks** | 68 |
| **Total `: any` / `as any` uses** | 125 |
| **Local interface definitions** | 117 |
| **Imports from shared/schema** | 0 |
| **Inline role checks** | 89 |
| **Pages with role checks** | 15 |
| **Roles checked** | `admin`, `master`, `affiliate`, `upload`, `comment`, `view`, `user`, `assistant`, `sub_master` |
| **Pages checking "admin" but NOT "master"** | 2 (`admin-login.tsx`, `csu-portal.tsx`) |
| **Unique status string constants** | 30 |
| **Inline .filter() calls in pages** | 98 |
| **QueryKey conflicts (same endpoint, different keys)** | 1 |
| **Duplicate interface names across files** | 4 |

---

## QueryKey Conflicts

Same backend endpoint cached under different keys — invalidation from one page misses another.

| Endpoint | Keys Used | Files |
|---|---|---|
| `/api/auth/me` | `[/api/auth/me]`, `[auth]`, `[/api/vendor/auth/session]` | `admin-dashboard.tsx`, `affiliate-apply.tsx`, `affiliate-dashboard.tsx`, `affiliate-nda.tsx`, `csu-portal.tsx`, `master-portal.tsx`, `schedule-a.tsx`, `sign-contract.tsx`, `stress-test.tsx`, `submaster-portal.tsx`, `vendor-portal.tsx` |

---

## Duplicate Interface Definitions

Same interface name defined in multiple files — fields may differ, creating silent type drift.

| Interface Name | Defined In |
|---|---|
| `CaseNote` | `claims-navigator.tsx`, `vendor-portal.tsx` |
| `ContractTemplate` | `document-signature.tsx`, `sign-contract.tsx` |
| `ServiceCategory` | `insurance.tsx`, `planning-solutions.tsx` |
| `Service` | `insurance.tsx`, `planning-solutions.tsx` |

---

## Pages by useQuery Count (descending)

| Page | Queries | `any` Uses | Local Interfaces | Role Checks | Status Strings | Schema Imports |
|---|---|---|---|---|---|---|
| `admin-dashboard.tsx` | 17 | 23 | 3 | 4 | 0 | 0 |
| `claims-navigator.tsx` | 15 | 6 | 11 | 7 | 7 | 0 |
| `affiliate-dashboard.tsx` | 11 | 16 | 2 | 1 | 0 | 0 |
| `hipaa-admin.tsx` | 6 | 12 | 0 | 2 | 2 | 0 |
| `sign-contract.tsx` | 4 | 2 | 1 | 0 | 0 | 0 |
| `stress-test.tsx` | 3 | 3 | 0 | 2 | 1 | 0 |
| `navigator-elite.tsx` | 2 | 3 | 1 | 0 | 5 | 0 |
| `notification-console.tsx` | 2 | 0 | 3 | 8 | 0 | 0 |
| `submaster-portal.tsx` | 2 | 2 | 2 | 1 | 2 | 0 |
| `affiliate-nda-panels.tsx` | 1 | 2 | 0 | 0 | 0 | 0 |
| `affiliate-nda.tsx` | 1 | 0 | 0 | 1 | 0 | 0 |
| `csu-portal.tsx` | 1 | 8 | 8 | 2 | 6 | 0 |
| `master-portal.tsx` | 1 | 22 | 1 | 46 | 5 | 0 |
| `naval-intelligence.tsx` | 1 | 2 | 5 | 0 | 4 | 0 |
| `reset-password.tsx` | 1 | 0 | 0 | 0 | 0 | 0 |

---

## Role Check Analysis

Pages that gate access using inline `.role === "..."` comparisons.

| Page | # Checks | Roles Checked | Pattern |
|---|---|---|---|
| `master-portal.tsx` | 46 | `admin`, `master` | Raw string comparison |
| `notification-console.tsx` | 8 | `admin`, `master` | Raw string comparison |
| `claims-navigator.tsx` | 7 | `upload`, `comment`, `view` | Raw string comparison |
| `operator-ai.tsx` | 7 | `user`, `assistant` | Raw string comparison |
| `admin-dashboard.tsx` | 4 | `admin`, `master` | Raw string comparison |
| `login.tsx` | 3 | `admin`, `master`, `affiliate` | Raw string comparison |
| `facer-c-bot.tsx` | 3 | `user`, `assistant` | Raw string comparison |
| `csu-portal.tsx` | 2 | `admin` | Raw string comparison |
| `hipaa-admin.tsx` | 2 | `admin`, `master` | Raw string comparison |
| `stress-test.tsx` | 2 | `master`, `sub_master` | Raw string comparison |
| `admin-login.tsx` | 1 | `admin` | Raw string comparison |
| `affiliate-dashboard.tsx` | 1 | `affiliate` | Raw string comparison |
| `affiliate-login.tsx` | 1 | `affiliate` | Raw string comparison |
| `affiliate-nda.tsx` | 1 | `affiliate` | Raw string comparison |
| `submaster-portal.tsx` | 1 | `sub_master` | Raw string comparison |

---

## Binding Classifications

### Strong Bindings (4)

- `affiliate-nda-panels.tsx` — 1 queries, clean binding
- `affiliate-nda.tsx` — 1 queries, clean binding
- `reset-password.tsx` — 1 queries, clean binding
- `stress-test.tsx` — 3 queries, clean binding

### Weak Bindings (4)

- `naval-intelligence.tsx` — 1 queries with local types
- `navigator-elite.tsx` — 2 queries with local types
- `sign-contract.tsx` — 1 local interfaces, 4 queries, not imported from schema
- `submaster-portal.tsx` — 2 queries with local types

### Fragile Bindings (7)

- `admin-dashboard.tsx` — 23 uses of `any`, 17 queries, no shared types
- `affiliate-dashboard.tsx` — 16 uses of `any`, 11 queries, no shared types
- `claims-navigator.tsx` — 6 uses of `any`, 15 queries, no shared types
- `csu-portal.tsx` — 8 uses of `any`, 1 queries, no shared types
- `hipaa-admin.tsx` — 12 uses of `any`, 6 queries, no shared types
- `master-portal.tsx` — 22 uses of `any`, 1 queries, no shared types
- `notification-console.tsx` — 8 inline role checks with raw string comparison

---

## Key Risks

1. **Zero imports from shared/schema** — CONFIRMED: No frontend file imports types from the shared schema
2. **125 uses of `any` typing** — Backend shape changes produce zero compile errors
3. **1 queryKey conflicts** — Same endpoint cached under different keys, invalidation misses
4. **2 pages check "admin" but omit "master"** — Latent access control gap
5. **4 duplicate interface definitions** — Same entity name, potentially different fields across files
6. **30 unique status string constants** — Magic strings with no shared enum contract

---

*No fixes proposed. Report complete. All findings are structural observations of current UI ↔ backend bindings.*
